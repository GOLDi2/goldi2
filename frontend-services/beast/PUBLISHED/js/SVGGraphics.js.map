{"version":3,"file":"SVGGraphics.js","sourceRoot":"","sources":["SVGGraphics.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Created by maximilian on 12.05.17.\n */\n\nnamespace SVGGraphics {\n    const attrX = 'simcir-transform-x';\n    const attrY = 'simcir-transform-y';\n    const attrRotate = 'simcir-transform-rotate';\n    const attrZoom = 'simcir-transform-zoom';\n\n    /**\n     * Creates a DOM Element in the DOM namespace\n     * @param tagName\n     * @returns {JQuery}\n     */\n    export function createSVGElement(tagName: string): JQuery {\n        return $(document.createElementNS(\n            'http://www.w3.org/2000/svg', tagName));\n    };\n\n    /**\n     * Creates a SVG Element\n     * @param width - Width of the element - set to 100% if not given\n     * @param height - Height of the element - set to 100% if not given\n     * @returns {JQuery}\n     */\n    export function createSVG(width?: number, height?: number): JQuery {\n        if (width === undefined || height === undefined)\n            return createSVGElement('svg').attr({\n                version: '1.1', width: \"100%\", height: \"100%\",\n            });\n        return createSVGElement('svg').attr({\n            version: '1.1',\n            width: width, height: height,\n            viewBox: '0 0 ' + width + ' ' + height\n        });\n    };\n\n    export interface Transformation {\n        x: number,\n        y: number,\n        rotate: number,\n        zoom: number,\n    }\n\n    /**\n     * Gets the current transformation parameters of the given element\n     * @param $o\n     */\n    export function transform($o: JQuery): Transformation;\n    /**\n     * Applies transformations to a SVG object\n     * @param $o - element to apply transformations to\n     * @param x\n     * @param y\n     * @param rotate - rotation in degree - negative numbers mean left\n     * @param zoom - zoom factor\n     */\n    export function transform($o: JQuery, x?: number, y?: number, rotate?: number, zoom?: number): void;\n    export function transform($o: JQuery, x?: number, y?: number, rotate?: number, zoom?: number) {\n        const getNumber = function ($o: JQuery, k: string) {\n            var v = $o.attr(k);\n            return v ? +v : 0;\n        };\n\n        if (arguments.length >= 3) {\n            var transform = 'translate(' + x + ' ' + y + ')';\n            if (rotate) {\n                transform += ' rotate(' + rotate + ')';\n            }\n            if (zoom) {\n                transform += ' scale(' + zoom + ')';\n            }\n            $o.attr('transform', transform);\n            $o.attr(attrX, x);\n            $o.attr(attrY, y);\n            $o.attr(attrRotate, rotate);\n            $o.attr(attrZoom, zoom);\n            $o.trigger(\"tansformed\");\n        } else if (arguments.length == 1) {\n            return {\n                x: getNumber($o, attrX), y: getNumber($o, attrY),\n                rotate: getNumber($o, attrRotate), zoom: getNumber($o, attrZoom) || 1\n            };\n        }\n    };\n\n    /**\n     * Class for manipulating jQuery SVG Objects, esp. creating paths\n     */\n    export class SVGGraphics {\n        attr = {};\n        protected buf: string = '';\n        protected polygonBuf: string = '';\n        protected target: JQuery;\n\n        constructor(target: JQuery) {\n            this.target = target;\n        }\n\n        getTarget(): JQuery {\n            return this.target;\n        }\n\n        moveTo(x: number, y: number) {\n            this.buf += ' M ' + x + ' ' + y;\n        };\n\n        lineTo(x: number, y: number) {\n            this.buf += ' L ' + x + ' ' + y;\n        };\n\n        curveTo(x1: number, y1: number, x: number, y: number) {\n            this.buf += ' Q ' + x1 + ' ' + y1 + ' ' + x + ' ' + y;\n        };\n\n        closePath(close?: boolean): JQuery {\n            if (close) {\n                // really close path.\n                this.buf += ' Z';\n            }\n\n            const ele = createSVGElement('path').attr('d', this.buf).attr(this.attr);\n            this.target.append(ele);\n            this.buf = '';\n            return ele;\n        };\n\n        addPoint(x: number, y: number) {\n            this.polygonBuf += x + ',' + y + ' ';\n        }\n\n        closePolygon(): JQuery {\n            return this.closePoly('polygon');\n        }\n\n        closePolyline(): JQuery {\n            return this.closePoly('polyline');\n        }\n\n        private closePoly(name: string): JQuery {\n            const ele = createSVGElement(name).attr('points', this.polygonBuf).attr(this.attr);\n            this.target.append(ele);\n            this.polygonBuf = '';\n            return ele;\n        }\n\n        drawRect(x: number, y: number, width: number, height: number): JQuery {\n            const ele: JQuery = createSVGElement('rect');\n            this.target.append(ele.attr({\n                x: x,\n                y: y,\n                width: width,\n                height: height\n            }).attr(this.attr));\n            return ele;\n        };\n\n        drawCircle(x: number, y: number, r: number): JQuery {\n            const ele: JQuery = createSVGElement('circle');\n            this.target.append(ele.attr({cx: x, cy: y, r: r}).attr(this.attr));\n            return ele;\n        };\n\n        drawText(x: number, y: number, size: number, text: string): JQuery {\n            const element = createSVGElement('text');\n            this.target.append(element.attr(this.attr).addClass(\"simcir-device-text\").attr({\n                x: x,\n                y: y\n            }).css('font-size', size).text(text));\n            return element;\n        };\n    };\n}\n;"]}